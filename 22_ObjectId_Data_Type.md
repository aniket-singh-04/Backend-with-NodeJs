# MongoDB Data Types --- 

## 1. Introduction

MongoDB stores data in **BSON** (Binary JSON).\
BSON extends JSON by adding richer data types such as `ObjectId`,
`Date`, `Binary`, etc.

------------------------------------------------------------------------

## 2. BSON vs JSON

  Feature      JSON                BSON
  ------------ ------------------- -----------------------------------
  Storage      Text-based          Binary
  Speed        Slower parsing      Faster parsing
  Data Types   Limited             Rich (ObjectId, Date, Decimal128)
  Use Case     API communication   Database storage

------------------------------------------------------------------------

## 3. ObjectId Datatype

### What is an ObjectId?

`ObjectId` is MongoDB's default primary key type (`_id`).\
It is a **12‑byte unique identifier**.

### Internal Structure (12 bytes = 24 hex chars)

  Part         Size      Meaning
  ------------ --------- --------------------
  Timestamp    4 bytes   Creation time
  Machine ID   5 bytes   Prevents clashes
  Process ID   2 bytes   Unique per process
  Counter      3 bytes   Auto-incrementing

### Why ObjectId is **not a String**

ObjectId looks like a string but is **binary**.\
Reasons: - Faster indexing\
- Compact storage (12 bytes vs 24+ chars string)\
- Encodes timestamp automatically\
- BSON optimizes query performance on ObjectId fields

------------------------------------------------------------------------

## 4. Number Types

MongoDB supports multiple numeric types.

  Type           Size       Example      Use Case
  -------------- ---------- ------------ ------------------------
  `int32`        4 bytes    12           Small counters
  `int64`        8 bytes    9223372036   Large integers
  `double`       8 bytes    12.56        Decimal values
  `Decimal128`   16 bytes   12.6789      Financial calculations

------------------------------------------------------------------------

## 5. Full BSON Types List (Important)

  Type         Description
  ------------ -------------------
  Double       Floating values
  String       UTF‑8 text
  Object       Embedded document
  Array        List of values
  Binary       File storage
  Undefined    Deprecated
  ObjectId     Primary key
  Boolean      true/false
  Date         Time values
  Null         Empty value
  Regex        Pattern search
  JavaScript   Code
  Int32        Integer
  Timestamp    Oplog use
  Int64        Large integer
  Decimal128   Precise decimal

------------------------------------------------------------------------

## 6. ObjectId Validation

### How to check if a value is a valid ObjectId?

#### JavaScript (Node.js)

``` js
const { ObjectId } = require("mongodb");
ObjectId.isValid("67b5a8e9501c4d24a6f1a9d1");  // true
ObjectId.isValid("hello"); // false
```

#### Mongo Shell

``` js
ObjectId.isValid("67b5a8e9501c4d24a6f1a9d1")
```

------------------------------------------------------------------------

## 7. ObjectId Generation

### Auto-generated by MongoDB

When you insert a document without `_id`, MongoDB creates one
automatically.

``` js
db.users.insertOne({ name: "Aniket" })
```

### Manual Generation

``` js
new ObjectId()
```

### Based on Timestamp

``` js
ObjectId.createFromTime(1720000000)
```

------------------------------------------------------------------------

## 8. Advanced Notes

-   ObjectIds are sortable by creation time.
-   They reduce network bandwidth due to compact size.
-   BSON types are strongly optimized for NoSQL workloads.

------------------------------------------------------------------------

